library(roxygen2)
devtools::document()
devtools::document()
devtools::document()
devtools::build()
library(session7r)
?session7r
library(openxlsx)
library(tidyverse)
library(sf)
colIndex <-
c(13, 14, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 40, 41, 49, 61, 63, 68, 72, 80, 81, 90, 91, 92, 94, 96, 101, 116, 124, 125, 126, 129, 137, 141, 142, 155, 156, 160, 161, 162, 168, 169, 172, 173, 182, 189, 195, 197, 207, 208, 213, 234, 238, 239, 242, 243, 244, 255, 256, 257, 258, 259, 260, 261, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279)
df <- read.xlsx(xlsxFile = "E:/PAEZ/RAHBdata/RAHB_AllData_HamBurlOak.xlsx",
sheet = 1,
colNames = TRUE,
detectDates = TRUE,
cols = colIndex)
df_2016.sf <- df %>% filter(YEAR == 2016, !is.na(Latitude), !is.na(Longitude)) %>%
st_as_sf(coords = c("Longitude", "Latitude"),
crs = 4326)
df_2016.sf
rm(df)
(df_2016.sf <- st_transform(df_2016.sf, 26917))
df_2016.sf <- st_crop(df_2016.sf, xmin = 560921, ymin = 4767177, xmax = 621021, ymax = 4814330)
st_crs(df_2016.sf)
plot(df_2016.sf[,"Close.Price"])
hamilton_da.sf <- st_read("./FROMPROBIT", layer = "DAsj2")
hamilton_da.sf$area <- st_area(hamilton_da.sf)
hamilton_da.sf$popdens <- hamilton_da.sf$POP16 / hamilton_da.sf$area
st_crs(hamilton_da.sf)
hamilton_da.sf
ggplot(data = df_2016.sf) +
geom_sf(data = hamilton_da.sf, aes(fill = NULL)) +
geom_sf(aes(color = Close.Price))
st_crs(df_2016.sf)
st_crs(hamilton_da.sf)
st_crs(hamilton_da.sf) <- "+proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
houses.sf <- st_intersection(df_2016.sf, hamilton_da.sf)
ggplot(data = houses.sf) +
geom_sf(data = hamilton_da.sf, aes(fill = NULL)) +
geom_sf(aes(color = Close.Price, size = Close.Price), alpha = 0.2)
houses.sf <- houses.sf %>%
mutate(Transaction.Type = factor(Transaction.Type))
summary(houses.sf$Transaction.Type)
houses.sf <- houses.sf %>% filter(Transaction.Type == "SALE")
ggplot(data = houses.sf, aes(x = log(Close.Price))) + geom_histogram()
summary(houses.sf$Close.Price)
nrow(filter(houses.sf, Close.Price == 0))
summary(houses.sf$List.Price)
summary(houses.sf$Original.List.Price)
nrow(filter(houses.sf, Original.List.Price == 1))
nrow(filter(houses.sf, List.Price == 1))
nrow(filter(houses.sf, Original.List.Price <= 1000))
houses.sf %>% filter(Close.Price == 0) %>%
transmute(Close.Price, List.Price, Original.List.Price)
houses.sf %>% filter(Original.List.Price <= 1000) %>%
transmute(Close.Price, List.Price, Original.List.Price)
houses.sf %>% filter(Close.Price <= 25000) %>%
transmute(Close.Price, List.Price, Original.List.Price)
houses.sf <- houses.sf %>% filter(Close.Price >= 25000)
ggplot(data = houses.sf, aes(x = log(List.Price), y = log(Close.Price))) +
geom_point() +
geom_abline(intercept = 0, slope = 1, color = "blue")
houses.sf <- houses.sf %>%
mutate(Fronting.On = factor(Fronting.On))
summary(df_2016.sf$Fronting.On)
houses.sf <- houses.sf %>%
mutate(Property.Type = factor(Property.Type))
summary(houses.sf$Property.Type)
houses.sf <- houses.sf %>% filter(Property.Type == "RES")
houses.sf <- houses.sf %>%
mutate(Property.Sub.Type = factor(Property.Sub.Type))
summary(houses.sf$Property.Sub.Type)
houses.sf <- houses.sf %>% filter(Property.Sub.Type == "FRH")
ggplot(data = houses.sf, aes(x = log(Close.Price))) + geom_histogram()
mod0 <- lm(Close.Price ~ Baths.Full + Baths.Half + Beds.Total + Fronting.On + Kitchens.Total + Lot.Depth + Lot.Front + Number.Rooms + Parking.Spaces.Total, data = houses.sf)
summary(mod0)
ggplot(data = data.frame(Observed = mod0$fitted.values + mod0$residuals,
Predicted = mod0$fitted.values),
aes(x = Observed, y = Predicted)) +
geom_point()
houses.sf <- houses.sf %>%
mutate(log_Close.Price = log(Close.Price))
mod1 <- lm(log_Close.Price ~ Baths.Full + Baths.Half + Beds.Total + Fronting.On + Kitchens.Total + Lot.Depth + Lot.Front + Number.Rooms + Parking.Spaces.Total, data = houses.sf)
summary(mod1)
ggplot(data = data.frame(Observed = mod1$fitted.values + mod1$residuals,
Predicted = mod1$fitted.values),
aes(x = Observed, y = Predicted)) +
geom_point(alpha = 0.5) +
geom_abline(intercept = 0, slope = 1, color = "blue")
schools <- st_read("./HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
schools <- schools %>% filter(!is.na(ELEM)) %>%
st_as_sf(coords = c("X", "Y"))
st_crs(schools)
st_crs(schools) <- "+proj=utm +zone=17 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"
junk1 <- st_intersection(schools, hamilton_da.sf)
ggplot(data = junk1) +
geom_sf(data = hamilton_da.sf, aes(fill = NULL)) +
geom_sf()
View(houses.sf)
View(houses.sf)
houses2.sf <- houses.sf
houses2.sf$nearest <- st_nearest_feature(houses2.sf, schools)
houses2.sf <- houses2.sf %>%
mutate(schooldist = st_distance(houses2.sf, schools[houses2.sf$nearest,], by_element = TRUE))
View(houses2.sf)
View(houses2.sf)
rm(houses2.sf)
houses2.sf <- houses.sf
#houses2.sf$nearest <- st_nearest_feature(houses2.sf, schools)
houses2.sf <- houses2.sf %>%
mutate(schooldist = st_distance(houses2.sf, schools[st_nearest_feature(houses2.sf, schools),], by_element = TRUE))
View(houses2.sf)
View(houses2.sf)
ggplot(data = houses2.sf, aes(x = schooldist)) + geom_histogram()
ggplot(data = houses2.sf, aes(x = as.numeric(schooldist))) + geom_histogram()
ggplot(data = houses2.sf, aes(x = log(as.numeric(schooldist)))) + geom_histogram()
mod2 <- lm(log_Close.Price ~ Baths.Full + Baths.Half + Beds.Total + Fronting.On + Kitchens.Total + Lot.Depth + Lot.Front + Number.Rooms + Parking.Spaces.Total + log(schooldist), data = houses2.sf)
summary(mod2)
ggplot(data = houses.sf, aes(x = log(as.numeric(popdens)))) + geom_histogram()
ggplot(data = houses.sf, aes(x = log(AVGINC1))) + geom_histogram()
nrow(filter(houses2.sf, DELTAIN >= 4))
mod3 <- lm(log_Close.Price ~ Baths.Full + Baths.Half + Beds.Total + Fronting.On + Kitchens.Total + Lot.Depth + Lot.Front + Number.Rooms + Parking.Spaces.Total + log(schooldist) + DELTAIN + log(AVGINC1) + popdens, data = houses2.sf)
summary(mod3)
document()
library("devtools")
library(roxygen2)
devtools::document()
library(session7r)
?sfdist
sfdist()
library(sfdist)
sfdist(a,b)
install(sfdist)
install(session7r::sfdist)
install(session7r)
hello
?roxygen2
vignette("roxygen2", package = "roxygen2")
importFrom("utils", "read.table")
vignette("namespace", package = "roxygen2")
document()
warnings()
document()
warnings()
document()
warnings()
library(session7r)
?twotothepowerof
library(sf)
publicschools2016 <- st_read("./2015-2016/HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
publicschools2016primary <- publicschools2016 %>% filter(!is.na(ELEM)) %>%
st_as_sf(coords = c("X", "Y"))
publicschools2016secondary <- publicschools2016 %>% filter(!is.na(HIGH)) %>%
st_as_sf(coords = c("X", "Y"))
setwd(C:/Users/me/Documents/GitHub/SchoolProbit/session7r)
library(sf)
setwd(C:/Users/me/Documents/GitHub/SchoolProbit/session7r)
setwd(C:\Users/me/Documents/GitHub/SchoolProbit/session7r)
library(sf)
publicschools2016 <- st_read("./raw/2015-2016/HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("./raw/2015_2016/HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("/2015_2016/HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016/HWDSB2016schoolpoints", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016/", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016/HWDSB2015_16_SCHOOLPOINTS", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016/HWDSB_2015_16_SCHOOLPOINTS", layer = "HWDSB_2015_16_SCHOOLPOINTS")
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016", layer = "HWDSB_2015_16_SCHOOLPOINTS")
publicschools2016primary <- publicschools2016 %>% filter(!is.na(ELEM)) %>%
st_as_sf(coords = c("X", "Y"))
publicschools2016secondary <- publicschools2016 %>% filter(!is.na(HIGH)) %>%
st_as_sf(coords = c("X", "Y"))
publicschools2016primary
library(sf)
publicschools2016 <- st_read("C:/Users/me/Documents/GitHub/SchoolProbit/session7r/raw/2015_2016", layer = "HWDSB_2015_16_SCHOOLPOINTS")
publicschools2016primary <- publicschools2016 %>% filter(!is.na(ELEM)) %>%
st_as_sf(coords = c("X", "Y")) %>%
select(SCHNAME, X, Y, Address, City, PostalCode, Year_Built, SchoolID, geometry)
publicschools2016secondary <- publicschools2016 %>% filter(!is.na(HIGH)) %>%
st_as_sf(coords = c("X", "Y")) %>%
select(SCHNAME, X, Y, Address, City, PostalCode, Year_Built, SchoolID, geometry)
publicschools2016primary
publicschools2016secondary
save(publicschools2016secondary, file = "publicschools2016secondary.Rdata")
save(publicschools2016primary, file = "publicschools2016primary.Rdata")
document()
library(session7r)
?publicschools2016secondary
data(publicschools2016secondary)
data(publicschools2016secondary.RData)
load(publicschools2016secondary.RData)
twotothepowerof(3)
library(session7r)
twotothepowerof(3)
library(session7r)
twotothepowerof(3)
?data
data(publicschools2016secondary)
?publicschools2016secondary
library(session7r)
library(session7r)
?publicschools2016secondary
data(publicschools2016secondary)
data(publicschools2016secondary.RData)
load(publicschools2016secondary.RData)
isfar<-load("./data/publicschools2016secondary.RData")
isfar
load("./data/publicschools2016secondary.RData")
publicschools2016secondary
library(twotothepowerof)
